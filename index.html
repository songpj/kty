<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Happy Birthday</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" type="text/css" href="css/card.css">
</head>
<body>
    <div class="wrapper">
        <div class="card-face">
            <div class="face-top">
                <img class="face-kt" src="images/face-kt.png" />
            </div>
            <div class="face-bottom">
                <div class="stamp"></div>
                <div class="title">
                    <p>Happy Birthday</p>
                    <p>W.D.</p>
                </div>
            </div>
            <div class="person left">
                <div class="person-bg"></div>
                <div class="arm"></div>
            </div>
        </div>
    </div>


    <div class="overlay">
        <div class="time-count">
            <p>剩余时间：1年1月1天</p>
            <div>1分<span class="second"> 3 </span>秒</div>
        </div>
    </div>

    <div class="music-box">
        <div class="music-icon paused"></div>
        <audio id="laoSiJi"  loop="loop">
            autoplay="autoplay"
            <source src="http://m5.file.xiami.com/169/7169/1327081895/1774088627_16429051_l.mp3?auth_key=e3ea772abb6088020b7dbff402061743-1481684400-0-null" type="audio/mpeg" />
        </audio>
    </div>


    <div class="land-stuff-box">
        <div class="land-stuff">cai</div>
        <div class="land-stuff">vr</div>
        <div class="land-stuff"></div>

    </div>


    <script type="text/javascript" src="js/zepto.min.js"></script>
    <script>
        // music
        $('.music-box').on('click', function(){
            var audio = $('.music-box #laoSiJi')[0],
                musicIcon = $('.music-box .music-icon');
            if(audio.paused){
                audio.play();
                musicIcon.removeClass('paused')
            }else{
                audio.pause();
                musicIcon.addClass('paused')
            }
        });

        // count down
        var secondEle = document.querySelector('.time-count .second');
        var timeCount = window.setInterval(function(){
            var cur = parseInt(secondEle.innerHTML);

            if(cur > 0){
                secondEle.innerHTML = cur - 1;
            }else{
                window.clearInterval(timeCount);
                $('.overlay').addClass('fadeOut');
            }
        }, 1000);
    </script>
    <script>
        var stuffs = $('.land-stuff');
        for(var i in stuffs){
            if(stuffs.hasOwnProperty(i)){
                $(stuffs[i]).on('tap', function(){
                    $(this).addClass('bounce');
                    (function(ele){
                        window.setTimeout(function(){
                            $(ele).removeClass('bounce');
                        }, 600);
                    }(this));
                });
            }
        }
    </script>
</body>
</html>